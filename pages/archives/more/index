/*
import { useState } from "react";
import { GetStaticProps } from "next";
import { getAllPosts } from "../../../lib/api";
import Layout from "../../../components/layout";

const PostsList = ({ initialPosts, preview, user }) => {
  const [poster, setPosts] = useState(initialPosts || []); // Initialize with initialPosts or an empty array
  const [currentPage, setCurrentPage] = useState(1);

  //console.log("Initial Posts", initialPosts);

  const fetchNextPage = async () => {
    const nextPage = currentPage + 1;
    const newPosts = await getAllPosts(
      false,
      500,
      poster[poster.length - 1]?.date
    );

    if (newPosts) {
      setPosts([...poster, ...newPosts]);
      setCurrentPage(nextPage);
    }

    if (newPosts && newPosts.length > 0) {
      console.log("Fetched posts:", poster);
    }
  };

  // Corrected console.log statement
  //console.log("Fetched posts:", poster);
*/
{
  /** 
  return (
    <Layout preview={preview} user={user}>
      <div>
        <ul>
          {poster && poster.length > 0 ? (
            poster.map((post) => (
              <li key={post.node.slug}>
                
                <p>{post.node.title}</p>
              </li>
            ))
          ) : (
            <li>No posts available</li>
          )}
        </ul>

        <button onClick={fetchNextPage} disabled={!poster || !poster.length}>
          Load More
        </button>
      </div>
    </Layout>
  );
};
*/
}
/** 
export const getStaticProps: GetStaticProps = async (preview) => {
  try {
    const response = await getAllPosts(preview);

    if (!response) {
      throw new Error("Request failed: No response received");
    }

    if (!response.ok) {
      const status = response.status || "unknown";
      const statusText = response.statusText || "unknown";

      console.error("Error response:", response);

      throw new Error(`Request failed with status: ${status} (${statusText})`);
    }

    const data = await response.json();

    if (!Array.isArray(data)) {
      throw new Error("Invalid Data format: Response is not an array");
    }

    return {
      props: {
        initialPosts: data || [],
      },
    };
  } catch (error) {
    console.error("Error fetching posts:", error);
    throw error;
  }
};

export default PostsList;
*/
